<mat-card class="pa-2 mat-typography" fxLayout="column">
  <h2>Positions</h2>
    <mat-form-field>
      <mat-select placeholder="Select Department" [(ngModel)]="selectedDep" name="dep">
        <mat-option *ngFor="let department of departments" [value]="department.name" (click)="panel.close()">
          {{department.name}}
        </mat-option>
      </mat-select>
      <mat-hint>Select New for a new Department</mat-hint>
    </mat-form-field>

    <mat-expansion-panel class="ma-1" #panel (opened)="getSelectedDep()">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{selectedDep}}
        </mat-panel-title>
        <mat-panel-description>
          Add or Modify Positions
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-form-field>
        <input matInput placeholder="Department Name" [(ngModel)]="newDep" name="editDep">
      </mat-form-field>
      <div  class="ma-1" *ngFor="let position of currentDep?.positions">
        <mat-form-field>
          <input matInput placeholder="Position Name" [(ngModel)]="position.name" (change)="onChangesDep()">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Position ID" [(ngModel)]="position.positionId" (change)="onChangesDep()">
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Position Salary" [(ngModel)]="position.baseWage" (change)="onChangesDep()">
        </mat-form-field>

      </div>

          <mat-form-field>
            <input matInput placeholder="Position Name" [(ngModel)]="newPos.name">
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="Position ID" [(ngModel)]="newPos.positionId">
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="Position Salary" [(ngModel)]="newPos.baseWage">
          </mat-form-field>

          <button mat-icon-button (click)="onAddDep()">
            <mat-icon>add_circle</mat-icon>
          </button>
    </mat-expansion-panel>

  <button mat-button color="primary" (click)="onSaveDep(); panel.close(); this.selectedDep=this.currentDep.name">
    <mat-icon>save</mat-icon>
    Save changes
  </button>
  <mat-card-footer class="pa-2 mat-typography">
  <span> Select New > Open Dropdown > Edit Department Name > Add Positions > Save Changes</span>
  </mat-card-footer>
</mat-card>
