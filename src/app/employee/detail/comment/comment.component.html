<mat-accordion class="container">
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        COMMENTS INFORMATION
      </mat-panel-title>
      <mat-panel-description>
        EXPAND
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="pa-1">
      <mat-table #table [dataSource]="dataSource">
        <ng-container matColumnDef="comment">
          <mat-header-cell *matHeaderCellDef> Comment </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{ row.comment }} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="by">
          <mat-header-cell *matHeaderCellDef fxFlex="200px">
            By
          </mat-header-cell>
          <mat-cell *matCellDef="let row" fxFlex="200px">
            {{ row?.submittedBy?.firstName + " " + row?.submittedBy?.lastName }}
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="date">
          <mat-header-cell *matHeaderCellDef fxFlex="200px">
            Date
          </mat-header-cell>
          <mat-cell *matCellDef="let row" fxFlex="200px">
            {{ row?.commentDate | date: "MM/dd/yyyy h:mm a" }}
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
      </mat-table>

      <ng-container *ngIf="this.dataSource.data.length === 0">
        <div
          style="
            width: 20%;
            margin-right: auto;
            margin-left: auto;
            margin-top: 25px;
          "
        >
          No Comments Available
        </div>
      </ng-container>
    </div>
    <div fxLayout="column" class="comment pa-1">
      <div
        fxLayout="row"
        [formGroup]="commentForm"
        *ngIf="this.authorization.edit && this.authorization.create"
      >
        <mat-form-field appearance="fill">
          <textarea
            matInput
            formControlName="comment"
            placeholder="Leave a comment"
          ></textarea>
        </mat-form-field>
      </div>
    </div>
    <button
      mat-button
      color="primary"
      (click)="onSubmit()"
      *ngIf="this.authorization.edit && this.authorization.create"
    >
      <mat-icon>check</mat-icon>&nbsp;Submit
    </button>
  </mat-expansion-panel>
</mat-accordion>
